# 联想小新13 pro 2020 ARE 版本键盘单个按键拆装
- date: 2023-09-16
- lastmod: 2024-07-19

失效按键：w

失效原因：疑似灰尘、游戏过热

失效症状：打 csgo 时前进突然失效、时好时坏，两天后后就按下没反应了。切换到 win 系统后按键依旧无效，可按下，系统无反应，其它按键输入正常。游戏内改键位继续打

## 拆装

先拿右ctrl练习，翘边角观察内部结构，X 运动结构，上方为卡扣（靠近屏幕转轴一侧为上方、靠近触摸板一侧为下方），下方是平移锁止机构。从上方一角拔拉开，插入金属拨片将上方一侧卡扣翘开，紧接着敲开上方另一侧卡扣，此时上方两卡扣已解锁，现在将键帽往转轴处推，即可取下键帽，不要垂直于键盘平面往上扯，因为键帽下方不是垂直卡扣，它是和键盘平面平行的机构，垂直扯反而是最难的、也是最容易损坏键帽的操作。

装回去就反着来，倾斜着将键帽由转轴侧向下方推入，将下方平移锁止机构推进去，整个放到位之后稍微使劲垂直键盘平面往下摁，使上方两卡扣扣上即可。

第一回w按键失效，我尝试风扇冷却，似乎无效，退出cs之后，好了，因此推测是过热；第二次失效游戏里改键位了，不管w，然后就第一回我把w按键拆下，还没清理，它就又好了。

# 失效原因

起初似乎是游戏过热，冷却就好；然后就是莫名其妙失效，拆开装回去就好；最后就是拆下按也不行，尝试过多按几次、摁着揉，也没法恢复。蓝牙键盘接上去可以输入 w，排除是被限制输入w，换系统依旧失效，排除系统问题

既然上面确认了是内置键盘的内部问题导致的失效，就外接键盘使用或者改键位使用，就这样过去了半年，不经意间按到了失效按键，发现其又能输入了，然后我满心欢喜的把 ta 的支架、胶帽装回去，用了没几天又失效了。

我拆开键盘，取下x支架和像胶帽，可见印在薄膜上的导电线路，一部分区域重叠在一起，剪掉不带线路的一个角的薄膜连接，想扒拉开，结果没法扒拉开，也就是说其不是三层结构，然后推测这两个导电线路印在同一层薄膜上。如果按照最后一种导电橡胶键盘的结构去理解，两边的线路应该交错开，然后用橡胶帽来使其导通，实际上部分重叠了。这就很诡异。

## 临时解决办法：改键位

### windows

1. [powertoys/keyboard-manager](https://learn.microsoft.com/zh-cn/windows/powertoys/keyboard-manager):轻松修改，无需重启，退出软件即可恢复，启动软件自动载入

### Linux

1. [Xmodmap](https://wiki.archlinux.org/title/Xmodmap)：备份原始配置，复制一份做修改，需要的时候应用修改和恢复原始配置。在一些DE中，`~/.Xmodmap` 会自动加载为用户默认配置，而无需开机后手动加载

```bash
xmodmap -pke > ~/.Xmodmap # 将当前的键盘映射配置存储到文件
cp ~/.Xmodmap ~/.Xmodmap-backup # 备份
nano .Xmodmap # 编辑 .Xmodmap，下面有个例子
xmodmap ~/.Xmodmap # 使用该文件的配置作为新的键盘映射配置
```

- 文件名: .Xmodmap
- 目地：前两行是交换按键（ w 和 右边的 alt），后四行是把 CapsLock 修改为左边的 Ctrl

```
keycode  25 = Alt_R Meta_R Alt_R Meta_R
keycode 108 = w W w W

remove lock = Caps_Lock
keysym Caps_Lock = Control_L
add Control = Control_L
keysym Control_L = Caps_Lock
```


2. KDE 桌面可以在系统设置的键盘里面，高级里边有可以设置一些特殊键位，不过看了不支持对调 alt/w

3. [Linux通用键位修改（中）-实际操作 2020年03月18日 JimMoen](https://www.bilibili.com/read/cv5156572/):root /etc/udev/hwdb.d
