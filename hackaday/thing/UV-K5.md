# 模拟对讲机 UV-K5 改 固件
- date: 2023-8-9
- lastmod: 2023-8-12

改进空间

1. 固件升级为中文固件
2. 音质改造，加电容换喇叭
3. typeC 加 usb 转 ttl 芯片支持 c 口升级固件
4. typeC 加下拉电阻支持 c2c 充电

注意事项：

1. 不要在充电时发射
2. 不要不插天线就发射，最好不插天线不开机

# 拆机

BH3ENO 的拆机视频比 fire1tech 的要细致很多，无损拆。

[泉盛UVK5拆机 2023 脑洞分拨中心](https://www.bilibili.com/read/cv22626646/):建议不要充电时按发射，避免烧芯片

> 当你使用C-C的线与合规的适配器/移动电源充电时问题就来了，CC引脚悬空会导致电源适配器拒绝供电
>
> 座充充电器功率只够充电，按一下发射键都会爆炸的

拆完后的铝块上有导热胶垫和typeC隔离座，我的导热胶垫裂开了，看样子是元器件挤压导致的，公差这个价格没啥好要求的。目测有些虚空元件没有焊，按键这一面有些测试点。可以不装电池，只插 typeC 也是可以开机的。拆的时候我没有弄坏啥，把玩的时候翻来翻去把喇叭线凝结巴断线了，好在黄花907时刻准备着。侧边PTT的锅仔片电路板方式有点经验到我

# 固件升级

[把UV-K5充电口改成通信口，升级固件再也不用多根线了，真香！2023-08-08 fire1tech](https://www.bilibili.com/video/BV1CN411b7Ww/)：ch340N 飞线，极其考验工具和手。评论区 captain-ACE 说“刷固件中断不会变砖，有底层引导程序，可以重新进dfu刷”

32pin 的 mcu 据网上信息是 DP32G030，根据芯片手册里 8、9 引脚分别是 TX、RX，和上面视频里的相互印证

给对讲机升级固件一般是通过写频线，网上十来块钱一根。当然上面视频里都改了通过单面 typeC 写数据，但是本人工具和水平不足，用手头上的 usb2ttl 的话，就飞三根线(TX, RX, GND)试一下，我的手太还是英文显示的，官方固件现在支持中文了，这样看一下到底升级成功没有。官方写频软件只有 windows 版本的，而且模拟手台和升级工具的默认安装位置我要吐槽一下，你两不能默认在一个路径是吧？外包给不同公司写的软件吗？最后本人升级 k5_3.00.10 后成功切换为中文菜单

流程如下：

> 长按PTT键开机，手持台手电灯常亮（屏幕无显示），此时手持台已进入固件升级模式，再插入双插USB2102写频线，选择串口后连接，选择固件然后点击升级工具“升级”，升级过程中手持台手电灯闪烁，升级完成时软件提示“升级程序成功！”

模拟手台升级工具V1.11.1 在卸载后会有残留，可见有运行日志和配置文件

# 相关阅读

[模拟对讲机 UV-K5 福建泉盛电子有限公司](http://qsfj.com/products/3002)

[amnemonic/Quansheng_UV-K5_Firmware](https://github.com/amnemonic/Quansheng_UV-K5_Firmware/tree/main)：各种K5固件、原理图，有自制固件教程

[piotr022/UV_K5_playground](https://github.com/piotr022/UV_K5_playground)

[泉盛UV-K5仅需6元改装USB座充 哆啦一泓 2023-07-26](https://blog.csdn.net/lee1hong/article/details/131558990)：改为8.4V到15V的输入

[神奇泉盛UV-K5短波接收/发射刷机教程 2023-06-13](https://www.bilibili.com/video/BV14h4y1R747/)：评论区说 CH340TA芯片 的写频线接 usb3.0好像不行，得用2.0的
